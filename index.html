<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Example web page that returns JSON for my repo.</title>
    <style>
        p {
            font-family: Verdana, Arial, Helvetica, sans-serif;
        }

        table, td, th {
            border: 1px solid #ccc;
            text-align: left;
        }

        table {
            border-collapse: collapse;
        }

        th, td {
            padding: 4px;
            font-family: Verdana, Arial, Helvetica, sans-serif;
        }

        th {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <p>The purpose of this web page is to act as an example web page for my repository.</p>
    
    <p>Utilising Selenium and C#, my repository demonstrates how to capture the HTTP response from an API call performed on a 3rd party web page. This can be useful for testing, or as part of scraping 3rd party websites. Specifically, my repo demonstrates capturing JSON from the message body of an HTTP response, then deserializing it.</p>

    <p>Below is some data returned from the API call which was performed by the JavaScript on this page:</p>

    <table>
        <thead>
            <tr><th>Name</th><th>Email Address</th></tr>
        </thead>
        <tbody id="users">
        </tbody>
    </table>

    <script>
        const tbody = document.getElementById('users');
        const rows = document.createDocumentFragment();
        const url = 'https://jsonplaceholder.typicode.com/users/';

        async function getUsers() {
            let response = await fetch(url);
            let data = await response.json();
            return data;
        }

        getUsers()
            .then(json => {
                json.map(function (users) {
                    let tr = document.createElement('tr');

                    let tdName = document.createElement('td');
                    tdName.innerHTML = `${users.name}`;
                    tr.append(tdName);

                    let tdEmail = document.createElement('td');
                    tdEmail.innerHTML = `${users.email}`;
                    tr.append(tdEmail);

                    rows.append(tr);
                });
                tbody.append(rows)
            })
            .catch(function (error) {
                console.log(error);
            });
    </script>
</body>
</html>